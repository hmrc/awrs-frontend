@*
 * Copyright 2019 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import views.html.helpers._
@import uk.gov.hmrc.play.views.html._
@import uk.gov.hmrc.play.views.html.helpers._
@import views.html.helpers._
@import forms.AwrsFormFields._
@import views.helpers._
@import views.view_application.helpers._
@import views.view_application.helpers.SubViewTemplateHelper._
@import services.DataCacheKeys._
@import play.api.i18n.Messages.Implicits._
@import play.api.Play.current

@(tradingActivityForm: Form[models.TradingActivity])(implicit request: Request[AnyContent], viewApplicationType: ViewApplicationType = LinearViewMode)

@actionRoute = @{
    isEditMode match {
        case true => controllers.routes.TradingActivityController.saveAndReturn
        case false => controllers.routes.TradingActivityController.saveAndContinue
    }
}

@ctaMessage = @{
    isEditMode match {
        case true => Messages("awrs.generic.save_return")
        case false => Messages("awrs.generic.save_continue")
    }
}

@pageHeading = @{
    Messages("awrs.additional_information.trading_activity.heading", headingPrefix(enter = "awrs.generic.tell_us_about"))
}

@includes.awrs_main(
    title = Messages("awrs.generic.tab.title", pageHeading), userLoggedIn = true){
<div class="grid">
    <div class="grid grid-2-3">
        @backLinkHelper(BackLinkParams(
            sectionName = tradingActivityName
        ))
        @errorSummaryTemplate(tradingActivityForm)
        <header class="page-header">
            <h1 id="trading-activity-heading" class="heading-xlarge">
                @pageHeading
            </h1>
            @awrsProgressHelper(request.getBusinessType, tradingActivityName)
        </header>

        @form(action = actionRoute){
            <div class="form-group">
                @awrsInputTypeGroupCheckbox(
                    InputTypeGroupCheckboxParams(
                        tradingActivityForm("wholesalerType"),
                        wholesaler,
                        legend = Messages("awrs.additional_information.wholesaler_type"),
                        fieldSetAttributes = "id=wholesalerType_field",
                        formHint = Messages("awrs.additional_information.form_hint"),
                        formHintId = "wholesalerType-hint",
                        ariaDescribedBy = "wholesalerType-legend wholesalerType-hint",
                        formHasErrors = tradingActivityForm.hasErrors
                    )
                )
                <div id="other-wholesalerType">
                    @awrsInputTypeText(
                        InputTypeTextParams(
                            tradingActivityForm("otherWholesaler"),
                            label = Messages("awrs.additional_information.other.wholesaler_type"),
                            labelHighlight = true,
                            inputId = "otherWholesaler",
                            maxLength = frontendDefaultLen.toString,
                            wrapperClass = "panel-indent",
                            required = true
                        )
                    )
                </div>
            </div>
            <div class="form-group">
                @awrsInputTypeGroupCheckbox(
                    InputTypeGroupCheckboxParams(
                        tradingActivityForm("typeOfAlcoholOrders"),
                        orders,
                        legend = Messages("awrs.additional_information.orders.orders_question"),
                        fieldSetAttributes = "id=typeOfAlcoholOrders_field",
                        formHint = Messages("awrs.additional_information.form_hint"),
                        formHintId = "typeOfAlcoholOrders-hint",
                        ariaDescribedBy = "typeOfAlcoholOrders-legend typeOfAlcoholOrders-hint",
                        formHasErrors = tradingActivityForm.hasErrors
                    )
                )
                <div id="other-typeOfAlcoholOrders">
                    @awrsInputTypeText(
                        InputTypeTextParams(
                            tradingActivityForm("otherTypeOfAlcoholOrders"),
                            label = Messages("awrs.additional_information.orders.other.orders_question"),
                            labelHighlight = true,
                            inputId = "otherTypeOfAlcoholOrders",
                            maxLength = frontendDefaultLen.toString,
                            wrapperClass = "panel-indent",
                            required = true
                        )
                    )
                </div>
            </div>

            <div class="form-group">
                @awrsInputTypeRadioGroup(
                    InputTypeRadioGroupParams(
                        tradingActivityForm("doesBusinessImportAlcohol"),
                        Seq(Messages("awrs.generic.yes") -> Messages("awrs.generic.yes"),
                            Messages("awrs.generic.no") -> Messages("awrs.generic.no")),
                        legend = Messages("awrs.additional_information.alcohol_import"),
                        legendId = "doesBusinessImportAlcohol-legend",
                        fieldSetClass = "inline",
                        fieldSetAttributes = "id=doesBusinessImportAlcohol_field"
                    )
                )
            </div>
            <div class="form-group">
            @awrsInputTypeRadioGroup(
                InputTypeRadioGroupParams(
                    tradingActivityForm("doYouExportAlcohol"),
                    Seq(Messages("awrs.generic.yes") -> Messages("awrs.generic.yes"),
                        Messages("awrs.generic.no") -> Messages("awrs.generic.no")),
                    legend = Messages("awrs.additional_information.alcohol_export"),
                    legendId = "doYouExportAlcohol-legend",
                    fieldSetClass = "inline",
                    fieldSetAttributes = "id=doYouExportAlcohol_field"
                )
            )
            </div>
            <div class="form-group">
                <div id="exportLocation-content">
                    @awrsInputTypeGroupCheckbox(
                        InputTypeGroupCheckboxParams(
                            tradingActivityForm("exportLocation"),
                            exportAlcohol,
                            legend = Messages("awrs.additional_information.export_location"),
                            fieldSetAttributes = "id=exportLocation_field"
                        )
                    )
                </div>
            </div>
            <div class="form-group">
                @awrsInputTypeRadioGroup(
                    InputTypeRadioGroupParams(
                        tradingActivityForm("thirdPartyStorage"),
                        Seq(Messages("awrs.generic.yes") -> Messages("awrs.generic.yes"),
                            Messages("awrs.generic.no") -> Messages("awrs.generic.no")),
                        legend = Messages("awrs.additional_information.third_party_storage"),
                        legendId = "thirdPartyStorage-legend",
                        fieldSetClass = "inline",
                        fieldSetAttributes = "id=thirdPartyStorage_field",
                        formHint = Messages("awrs.additional_information.third_party_storage_help_text"),
                        formHintId = "thirdPartyStorage-hint",
                        ariaDescribedBy = "thirdPartyStorage-legend thirdPartyStorage-hint",
                        formHasErrors = tradingActivityForm.hasErrors
                    )
                )
            </div>
            @submitButtonAndNavLinks(SubmitAndNavLinkParams(
                sectionName = tradingActivityName,
                submitText = ctaMessage,
                submitId = "save-and-continue"
            ))
        }
    </div>
</div>
}
